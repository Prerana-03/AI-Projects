import re
from youtube_transcript_api import YouTubeTranscriptApi
import openai

openai.api_key = "your_openai_api_key"

# Extract video ID from the YouTube URL
youtube_url = "video_link_here"
video_id_regex = r'(?:v=|\/)([0-9A-Za-z_-]{11}).*'
match = re.search(video_id_regex, youtube_url)
video_id = match.group(1) if match else None

# Get transcript using youtube-transcript-api
transcript = YouTubeTranscriptApi.get_transcript(video_id)
transcript_text = "\n".join([t['text'] for t in transcript])

# Define prompt for summarization
prompt = f"""
Please summarize the following transcript into concise key points.

Transcript:
{transcript_text}
"""

# Make API call to OpenAI
response = openai.ChatCompletion.create(
    model="gpt-4",
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": prompt}
    ],
    temperature=0.25
)

# Extract and print summary
summary = response.choices[0].message["content"]
print(summary)
